/* =============== Icons (global) =============== */
/* @import "@fortawesome/fontawesome-free/css/all.min.css";
@import "remixicon/fonts/remixicon.css"; */

/* Tailwind config pointer
@config "./tailwind.config.js"; */

@tailwind base;
@tailwind components;
@tailwind utilities;

/* ==========================================================
   NEBULA • LUXE • PRO — baseline tokens
========================================================== */

:root {
  --background: 230 35% 6%;
  --foreground: 210 48% 98%;
  --card: 230 32% 10%;
  --card-foreground: 210 44% 98%;
  --popover: 232 28% 11%;
  --popover-foreground: 210 44% 98%;
  --muted: 226 20% 16%;
  --muted-foreground: 220 12% 74%;
  --border: 228 22% 22%;
  --input: 228 22% 22%;
  --ring: 210 90% 62%;
  --primary: 222 90% 60%;
  --primary-foreground: 0 0% 100%;
  --secondary: 195 90% 58%;
  --secondary-foreground: 230 35% 6%;
  --accent: 260 80% 66%;
  --accent-foreground: 230 35% 6%;
  --destructive: 0 78% 54%;
  --destructive-foreground: 0 0% 100%;
  --success: 155 78% 45%;
  --success-foreground: 160 100% 10%;
  --warning: 44 96% 55%;
  --warning-foreground: 22 100% 10%;
  --info: 205 92% 62%;
  --info-foreground: 210 100% 10%;

  --g1: var(--primary);
  --g2: var(--secondary);
  --g3: var(--secondary);

  --r-md: .9rem;
  --r-lg: 1.25rem;
  --r-xl: 1.75rem;

  /* Fluid type */
  --step--1: clamp(.78rem, .70rem + .20vw, .88rem);
  --step-0:  clamp(.94rem, .86rem + .30vw, 1.05rem);
  --step-1:  clamp(1.13rem, 1.05rem + .35vw, 1.25rem);
  --step-2:  clamp(1.35rem, 1.20rem + .60vw, 1.60rem);
  --step-3:  clamp(1.62rem, 1.45rem + .90vw, 2.05rem);
  --step-4:  clamp(2.05rem, 1.80rem + 1.20vw, 2.70rem);
  --step-5:  clamp(2.60rem, 2.20rem + 1.80vw, 3.60rem);
}

/* Light theme via <html class="light"> */
.light {
  --background: 210 40% 98%;
  --foreground: 232 25% 8%;
  --card: 0 0% 100%;
  --card-foreground: 232 25% 10%;
  --popover: 0 0% 100%;
  --popover-foreground: 232 25% 10%;
  --muted: 220 16% 92%;
  --muted-foreground: 228 10% 32%;
  --border: 220 16% 88%;
  --input: 220 16% 88%;
  --ring: 210 90% 58%;
  --primary: 222 88% 56%;
  --primary-foreground: 0 0% 100%;
  --secondary: 195 88% 52%;
  --secondary-foreground: 0 0% 100%;
  --accent: 260 78% 58%;
  --accent-foreground: 0 0% 100%;
  --destructive: 0 78% 50%;
  --success: 155 74% 42%;
  --warning: 44 94% 52%;
  --info: 205 90% 54%;
  --g1: var(--primary);
  --g2: var(--secondary);
  --g3: var(--secondary);
}

/* ---------------- Base & a11y ---------------- */
@layer base {
  *,*::before,*::after { box-sizing: border-box; }
  * { @apply border-border; }
  html, body { height: 100%; width: 100%; }
  html, body { overflow-x: hidden; }
  html { scrollbar-gutter: stable; }
  body {
    @apply bg-background text-foreground antialiased;
    font-family: var(--font-inter), ui-sans-serif, system-ui;
    font-size: var(--step-0);
    text-rendering: optimizeLegibility;
    -webkit-font-smoothing: antialiased;
  }

  /* Icon font clarity */
  i[class^="ri-"], i[class*=" ri-"],
  i.fa, i.fas, i.far, i.fal, i.fab,
  i.fa-solid, i.fa-regular, i.fa-brands {
    font-style: normal;
    line-height: 1;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }
  i, .ri, .fa, .fas, .far, .fal, .fab,
  .fa-solid, .fa-regular, .fa-brands {
    color: hsl(var(--foreground));
  }
}

/* ---------------- Utilities ---------------- */
@layer utilities {
  /* Tailwind-driven aurora; paired with fallback below for guaranteed visuals */
  .page-aurora {
    background-image: theme("backgroundImage.luxe-aurora");
    background-attachment: fixed;
    background-size: cover;
    will-change: background-image, transform, opacity;
  }

  .full-bleed { width: 100vw; max-width: 100vw; margin-left: 50%; transform: translateX(-50%); }

  .gradient-text {
    background: linear-gradient(135deg, hsl(var(--g1)), hsl(var(--g2)), hsl(var(--g3)));
    -webkit-background-clip: text; background-clip: text; color: transparent;
  }

  .gradient-border { position: relative; }
  .gradient-border::before {
    content: ""; position: absolute; inset: 0; pointer-events: none;
    padding: 1px; border-radius: inherit;
    background: conic-gradient(from 180deg, hsl(var(--g1)), hsl(var(--g2)), hsl(var(--g3)), hsl(var(--g1)));
    -webkit-mask:
      linear-gradient(#000 0 0) content-box,
      linear-gradient(#000 0 0);
    mask:
      linear-gradient(#000 0 0) content-box,
      linear-gradient(#000 0 0);
    -webkit-mask-composite: xor; mask-composite: exclude;
  }

  .shadow-glow { box-shadow: 0 0 0 1px hsl(var(--border)/.7), 0 0 22px hsl(var(--primary)/.2); }

  /* Corrected skeleton (alpha fixed) */
  .skeleton {
    background: linear-gradient(90deg, rgba(255,255,255,0.06) 25%, rgba(255,255,255,0.12) 37%, rgba(255,255,255,0.06) 63%);
    background-size: 400% 100%;
    animation: shimmer 1.75s linear infinite;
    border-radius: var(--r-lg);
  }

  /* Focus ring utility */
  .focus-ring { @apply ring-2 ring-ring ring-offset-2 ring-offset-background outline-0; }
}

/* ---------------- Components ---------------- */
@layer components {
  /* Buttons */
  .btn {
    @apply inline-flex items-center justify-center gap-2 rounded-full px-5 py-2.5
           font-medium transition-all duration-300 ease-lux select-none
           focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2;
    transform: translateZ(0);
  }
  .btn-primary {
    @apply btn text-primary-foreground gradient-border;
    background-image:
      linear-gradient(180deg, rgba(255,255,255,0.10), rgba(255,255,255,0.04)),
      linear-gradient(135deg, hsl(var(--g1)) 0%, hsl(var(--g2)) 45%, hsl(var(--g3)) 100%);
    box-shadow: 0 0 24px hsl(var(--primary)/.4);
  }
  .btn-primary:hover { transform: translateY(-1px) scale(1.02); }
  .btn-primary:active { transform: translateY(0) scale(.99); }

  .btn-secondary {
    @apply btn text-secondary-foreground bg-[hsl(var(--secondary)/.12)] text-[hsl(var(--secondary))] gradient-border;
  }
  .btn-outline { @apply btn border border-input bg-transparent text-foreground hover:bg-muted/40; }
  .btn-ghost   { @apply btn bg-transparent text-foreground hover:bg-muted/30; }
  .btn-soft    { @apply btn bg-[hsl(var(--muted))] text-[hsl(var(--muted-foreground))] hover:bg-[hsl(var(--muted)/.85)]; }

  /* Icon button */
  .icon-btn { @apply inline-flex h-10 w-10 items-center justify-center rounded-full btn-outline; }
  .icon-btn, .icon-btn * { color: hsl(var(--foreground)); }
  .icon-btn svg { width: 18px; height: 18px; display: block; }

  /* Inputs */
  .input {
    @apply w-full rounded-xl border border-input bg-transparent px-4 py-2
           placeholder:text-[hsl(var(--muted-foreground))]
           focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 transition;
    box-shadow: 0 0 0 1px rgba(255,255,255,0.04) inset, 0 10px 25px rgba(0,0,0,0.25);
  }
  .textarea { @apply input min-h-[120px]; }
  .select   { @apply input pr-9; }

  /* NEW: Pills used on Candidate page */
  .chip  { @apply inline-flex items-center gap-1 rounded-full px-2.5 py-1 text-xs
                   bg-[hsl(var(--muted)/.5)] text-[hsl(var(--muted-foreground))] ring-1 ring-border; }
  .badge { @apply inline-flex items-center rounded-full px-2 py-0.5 text-xs
                   bg-[hsl(var(--secondary)/.18)] text-[hsl(var(--secondary))] ring-1 ring-[hsl(var(--secondary)/.35)]; }

  /* Cards / Panels */
  .card { @apply rounded-3xl bg-card text-card-foreground ring-1 ring-border overflow-hidden gradient-border transition-transform duration-300 ease-lux shadow-soft; }
  .card:hover { transform: translateY(-2px); }
  .panel { @apply rounded-3xl ring-1 ring-border bg-gradient-to-br from-[hsl(var(--card))] to-[hsl(var(--card)/.85)]; }

  /* Modal (raised above sticky navbar) */
  .modal-backdrop { @apply fixed inset-0 bg-black/60 backdrop-blur-sm animate-fade-in z-[60]; }
  .modal {
    @apply fixed left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2
           card p-6 shadow-lux max-w-lg w-[92vw] animate-rise-in z-[70];
  }

  /* Nav */
  .nav { @apply sticky top-0 z-50 backdrop-blur-2xl bg-[hsl(var(--background)/.6)] border-b border-white/10; }
  .nav-item { @apply text-sm text-[hsl(var(--muted-foreground))] hover:text-foreground transition-colors; }

  /* Tabs */
  .tabs { @apply inline-flex gap-1 p-1 rounded-full bg-[hsl(var(--muted)/.6)] gradient-border; }
  .tab { @apply px-4 py-2 rounded-full text-sm text-[hsl(var(--muted-foreground))] hover:text-foreground transition; }
  .tab.active { @apply bg-[hsl(var(--background))] text-foreground shadow-glow; }
}

/* ===== Extra animations ===== */
@layer utilities {
  @keyframes spin-slow { from { transform: rotate(0) } to { transform: rotate(360deg) } }
  .animate-spin-slow { animation: spin-slow 2.2s linear infinite; }

  @keyframes pulse-float { 0%,100% { transform: translateY(0); opacity: .9 } 50% { transform: translateY(-6px); opacity: 1 } }
  .animate-pulse-float { animation: pulse-float 2.4s ease-in-out infinite; }
  .animate-pulse-float-slow { animation: pulse-float 3s ease-in-out infinite; }
  .animate-pulse-float-fast { animation: pulse-float 1.8s ease-in-out infinite; }

  @keyframes loading-bar { 0% { transform: translateX(-100%) } 100% { transform: translateX(100%) } }
  .animate-loading-bar { position: relative; overflow: hidden; }
  .animate-loading-bar::before {
    content: ""; position: absolute; inset: 0; transform: translateX(-100%);
    background: linear-gradient(90deg, transparent, rgba(255,255,255,0.06), transparent);
    animation: loading-bar 1.2s linear infinite;
  }

  @keyframes toast-progress { from { width: 100% } to { width: 0% } }
  .animate-toast-progress { animation: toast-progress 3.2s linear forwards; }
}

/* ======= Reduced motion: tone down perpetual animations ======= */
@media (prefers-reduced-motion: reduce) {
  .animate-subtle-float,
  .animate-pulse-float,
  .animate-pulse-float-slow,
  .animate-pulse-float-fast,
  .animate-loading-bar,
  .animate-spin-slow,
  .animate-shimmer,
  .skeleton {
    animation-duration: 1ms !important;
    animation-iteration-count: 1 !important;
  }
}

/* ======= Plain CSS fallback (guaranteed visible aurora) ======= */
/* Agar kisi wajah se Tailwind ki bg-image util apply na ho, yeh fallback phir bhi background dikha dega */
body.page-aurora {
  background-color: hsl(var(--background));
  background-image:
    radial-gradient(1000px 700px at 15% -10%, hsl(var(--g1) / .16), transparent 60%),
    radial-gradient(900px 600px at 110% -10%, hsl(var(--g2) / .14), transparent 55%),
    radial-gradient(1000px 900px at 85% 110%, hsl(var(--g3) / .12), transparent 60%);
  background-repeat: no-repeat;
  background-size: cover;
  background-attachment: fixed;
}

/* ======= Mobile/iOS tweak: avoid fixed-attachment jank ======= */
@media (pointer: coarse) {
  .page-aurora { background-attachment: scroll; }
}
@supports (-webkit-touch-callout: none) {
  .page-aurora { background-attachment: scroll; }
}

/* =============== Icons (global) =============== */
/* @import "@fortawesome/fontawesome-free/css/all.min.css";
@import "remixicon/fonts/remixicon.css"; */

/* Tailwind config pointer
@config "./tailwind.config.js"; */

@tailwind base;
@tailwind components;
@tailwind utilities;

/* ==========================================================
   NEON ECLIPSE — unified global design tokens
   (supersedes the old “Nebula Blue” palette)
   Notes:
   - All colors are HSL variables consumed by Tailwind (see tailwind.config.js)
   - DO NOT style pages locally; import and use the global primitives (btn, input, card…)
   - Dark is the default (:root). Light is enabled by <html class="light">
========================================================== */

:root {
  /* Core surfaces */
  --background: 248 44% 6%;
  --foreground: 210 48% 98%;
  --card: 248 32% 10%;
  --card-foreground: 210 44% 98%;
  --popover: 250 28% 11%;
  --popover-foreground: 210 44% 98%;

  /* Muted & borders */
  --muted: 235 20% 16%;
  --muted-foreground: 220 12% 74%;
  --border: 232 22% 22%;
  --input: 232 22% 22%;

  /* Brand / accents */
  --primary: 268 95% 62%;
  --primary-foreground: 0 0% 100%;
  --secondary: 190 95% 55%;
  --secondary-foreground: 230 35% 6%;
  --accent: 312 92% 66%;
  --accent-foreground: 230 35% 6%;

  /* Status */
  --destructive: 0 78% 54%;
  --destructive-foreground: 0 0% 100%;
  --success: 155 78% 45%;
  --success-foreground: 160 100% 10%;
  --warning: 44 96% 55%;
  --warning-foreground: 22 100% 10%;
  --info: 205 92% 62%;
  --info-foreground: 210 100% 10%;

  /* Focus ring */
  --ring: 200 100% 65%;

  /* Gradient stops for global effects */
  --g1: var(--primary);
  --g2: var(--accent);
  --g3: var(--secondary);

  /* Grid color for background overlays */
  --grid: 220 14% 46%;

  /* Radii */
  --r-md: .9rem;
  --r-lg: 1.25rem;
  --r-xl: 1.75rem;

  /* Z-index tokens used across overlays */
  --z-nav: 50;
  --z-dropdown: 55;
  --z-overlay: 60;
  --z-modal: 70;
  --z-toast: 80;

  /* Fluid type */
  --step--1: clamp(.78rem, .70rem + .20vw, .88rem);
  --step-0:  clamp(.94rem, .86rem + .30vw, 1.05rem);
  --step-1:  clamp(1.13rem, 1.05rem + .35vw, 1.25rem);
  --step-2:  clamp(1.35rem, 1.20rem + .60vw, 1.60rem);
  --step-3:  clamp(1.62rem, 1.45rem + .90vw, 2.05rem);
  --step-4:  clamp(2.05rem, 1.80rem + 1.20vw, 2.70rem);
  --step-5:  clamp(2.60rem, 2.20rem + 1.80vw, 3.60rem);
}

/* Light theme via <html class="light"> */
.light {
  --background: 210 40% 98%;
  --foreground: 232 25% 8%;
  --card: 0 0% 100%;
  --card-foreground: 232 25% 10%;
  --popover: 0 0% 100%;
  --popover-foreground: 232 25% 10%;

  --muted: 220 16% 92%;
  --muted-foreground: 228 10% 32%;
  --border: 220 16% 88%;
  --input: 220 16% 88%;

  /* Keep brand vivid in light mode but slightly softened */
  --primary: 268 90% 54%;
  --primary-foreground: 0 0% 100%;
  --secondary: 190 90% 52%;
  --secondary-foreground: 0 0% 100%;
  --accent: 312 86% 58%;
  --accent-foreground: 0 0% 100%;

  --destructive: 0 78% 50%;
  --success: 155 74% 42%;
  --warning: 44 94% 52%;
  --info: 205 90% 54%;

  --ring: 210 90% 58%;

  --g1: var(--primary);
  --g2: var(--accent);
  --g3: var(--secondary);

  --grid: 220 12% 62%;
}

/* ---------------- Base & a11y ---------------- */
@layer base {
  *,*::before,*::after { box-sizing: border-box; }
  * { @apply border-border; }
  html, body { height: 100%; width: 100%; }
  html, body { overflow-x: hidden; }
  html { scrollbar-gutter: stable; }
  body {
    @apply bg-background text-foreground antialiased;
    font-family: var(--font-inter), ui-sans-serif, system-ui;
    font-size: var(--step-0);
    text-rendering: optimizeLegibility;
    -webkit-font-smoothing: antialiased;
  }

  /* Reset headings for consistent weights in both themes */
  h1, h2, h3, h4, h5, h6 { color: hsl(var(--foreground)); line-height: 1.15; font-weight: 700; }
  h1 { font-size: var(--step-5); }
  h2 { font-size: var(--step-4); }
  h3 { font-size: var(--step-3); }
  h4 { font-size: var(--step-2); }
  h5 { font-size: var(--step-1); }
  h6 { font-size: var(--step-0); }

  /* Links */
  a { color: hsl(var(--secondary)); text-underline-offset: 4px; }
  a:hover { color: hsl(var(--primary)); }

  /* Selection contrast for both themes */
  ::selection {
    background: hsl(var(--primary) / .28);
    color: hsl(var(--primary-foreground));
  }

  /* Scrollbar – globally visible in both themes */
  *::-webkit-scrollbar { width: 10px; height: 10px; }
  *::-webkit-scrollbar-thumb {
    background: linear-gradient(180deg, hsl(var(--g1)), hsl(var(--g2)));
    border-radius: 9999px;
    border: 2px solid hsl(var(--background));
  }
  *::-webkit-scrollbar-track { background: transparent; }

  /* Icon font clarity */
  i[class^="ri-"], i[class*=" ri-"],
  i.fa, i.fas, i.far, i.fal, i.fab,
  i.fa-solid, i.fa-regular, i.fa-brands {
    font-style: normal;
    line-height: 1;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }
  i, .ri, .fa, .fas, .far, .fal, .fab,
  .fa-solid, .fa-regular, .fa-brands {
    color: hsl(var(--foreground));
  }

  /* Ensure inline SVGs inherit theme color (prevents invisible icons in light mode) */
  svg:not([data-fixed-color]) { color: currentColor; }
  svg:not([data-fixed-color]) path[fill]:not([fill="none"]),
  svg:not([data-fixed-color]) polygon[fill]:not([fill="none"]),
  svg:not([data-fixed-color]) rect[fill]:not([fill="none"]) { fill: currentColor; }
  svg:not([data-fixed-color]) path[stroke],
  svg:not([data-fixed-color]) circle[stroke],
  svg:not([data-fixed-color]) line[stroke],
  svg:not([data-fixed-color]) polyline[stroke] { stroke: currentColor; }

  /* Form element base styles */
  input, textarea, select {
    color: hsl(var(--foreground));
    background-color: transparent;
  }
  input::placeholder, textarea::placeholder { color: hsl(var(--muted-foreground)); }

  /* Disabled states */
  :disabled { cursor: not-allowed !important; opacity: .6 !important; }

  /* Navbar font tweak (slightly heavier, globally) */
  .nav, header .nav, nav.nav { font-weight: 500; letter-spacing: .01em; }
}

/* ---------------- Utilities ---------------- */
@layer utilities {
  /* Tailwind-driven aurora; paired with fallback below for guaranteed visuals */
  .page-aurora {
    background-image: theme("backgroundImage.neon-eclipse");
    background-attachment: fixed;
    background-size: cover;
    will-change: background-image, transform, opacity;
  }

  .neon-grid {
    background-image: theme("backgroundImage.neon-grid");
    background-size: 36px 36px;
    background-blend-mode: soft-light;
  }

  .full-bleed { width: 100vw; max-width: 100vw; margin-left: 50%; transform: translateX(-50%); }

  /* Stronger gradient title (Smart HireX) */
  .gradient-text {
    background: linear-gradient(135deg, hsl(var(--g1)), hsl(var(--g2)), hsl(var(--g3)));
    -webkit-background-clip: text; background-clip: text; color: transparent;
    font-weight: 800;
    letter-spacing: -0.015em;
    filter: drop-shadow(0 0 12px hsl(var(--g1)/.28)) drop-shadow(0 0 28px hsl(var(--g2)/.18));
  }

  .gradient-border { position: relative; }
  .gradient-border::before {
    content: ""; position: absolute; inset: 0; pointer-events: none;
    padding: 1px; border-radius: inherit;
    background: conic-gradient(from 180deg, hsl(var(--g1)), hsl(var(--g2)), hsl(var(--g3)), hsl(var(--g1)));
    -webkit-mask:
      linear-gradient(hsl(var(--foreground)) 0 0) content-box,
      linear-gradient(hsl(var(--foreground)) 0 0);
    mask:
      linear-gradient(hsl(var(--foreground)) 0 0) content-box,
      linear-gradient(hsl(var(--foreground)) 0 0);
    -webkit-mask-composite: xor; mask-composite: exclude;
  }

  .shadow-glow { box-shadow: 0 0 0 1px hsl(var(--border)/.7), 0 0 22px hsl(var(--primary)/.28); }

  /* Soft shadow utility used by cards */
  .shadow-soft { box-shadow: 0 10px 30px hsl(var(--primary)/.08), inset 0 1px 0 hsl(var(--foreground)/.06); }

  /* Corrected skeleton (alpha fixed) */
  .skeleton {
    background: linear-gradient(90deg, hsl(var(--foreground)/.06) 25%, hsl(var(--foreground)/.12) 37%, hsl(var(--foreground)/.06) 63%);
    background-size: 400% 100%;
    animation: shimmer 1.75s linear infinite;
    border-radius: var(--r-lg);
  }

  /* Focus ring utility */
  .focus-ring { @apply ring-2 ring-ring ring-offset-2 ring-offset-background outline-0; }

  /* Scroll-area utility used in filters & any long lists */
  .scroll-area { max-height: var(--scroll-max, 70vh); overflow-y: auto; overscroll-behavior: contain; }

  /* Timing function utility */
  .ease-lux { transition-timing-function: cubic-bezier(0.22, 1, 0.36, 1); }

  /* Simple fade/raise animations used by menus & modals */
  @keyframes fade-in { from { opacity: 0 } to { opacity: 1 } }
  .animate-fade-in { animation: fade-in .2s ease-out both; }

  @keyframes rise-in { from { transform: translateY(6px); opacity: 0 } to { transform: translateY(0); opacity: 1 } }
  .animate-rise-in { animation: rise-in .25s cubic-bezier(.22,1,.36,1) both; }
}

/* ---------------- Components (global-only UI primitives) ---------------- */
@layer components {
  /* Buttons */
  .btn {
    @apply inline-flex items-center justify-center gap-2 rounded-full px-5 py-2.5
           font-medium transition-all duration-300 ease-lux select-none
           focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2;
    transform: translateZ(0);
  }
  .btn-primary {
    @apply btn text-primary-foreground gradient-border;
    position: relative; /* for glossy overlay */
    background-image:
      linear-gradient(180deg, rgba(255,255,255,0.10), rgba(255,255,255,0.04)),
      linear-gradient(135deg, hsl(var(--g1)) 0%, hsl(var(--g2)) 45%, hsl(var(--g3)) 100%);
    box-shadow: 0 0 24px hsl(var(--primary)/.4);
  }
  /* Glossy highlight (glassy/glossy look) */
  .btn-primary::after {
    content: "";
    position: absolute;
    left: 6px; right: 6px; top: 4px; height: 46%;
    border-radius: inherit;
    background: linear-gradient(to bottom, rgba(255,255,255,.35), rgba(255,255,255,0));
    mix-blend-mode: screen;
    pointer-events: none;
    opacity: .7;
  }
  .btn-primary:hover { transform: translateY(-1px) scale(1.02); }
  .btn-primary:active { transform: translateY(0) scale(.99); }

  .btn-secondary {
    @apply btn text-secondary-foreground bg-[hsl(var(--secondary)/.12)] text-[hsl(var(--secondary))] gradient-border;
  }
  .btn-outline { @apply btn border border-input bg-transparent text-foreground hover:bg-muted/40; }
  .btn-ghost   { @apply btn bg-transparent text-foreground hover:bg-muted/30; }
  .btn-soft    { @apply btn bg-[hsl(var(--muted))] text-[hsl(var(--muted-foreground))] hover:bg-[hsl(var(--muted)/.85)]; }

  .btn-danger { @apply btn text-[hsl(var(--destructive-foreground))]; background-color: hsl(var(--destructive)); }
  .btn-danger:hover { filter: brightness(1.05); }
  .btn-success { @apply btn text-[hsl(var(--success-foreground))]; background-color: hsl(var(--success)); }
  .btn-success:hover { filter: brightness(1.05); }
  .btn-warning { @apply btn text-[hsl(var(--warning-foreground))]; background-color: hsl(var(--warning)); }
  .btn-warning:hover { filter: brightness(1.05); }
  .btn-info { @apply btn text-[hsl(var(--info-foreground))]; background-color: hsl(var(--info)); }
  .btn-info:hover { filter: brightness(1.05); }

  /* OAuth: Google button — fixed outline visibility */
  .btn-google {
    @apply btn;
    isolation: isolate; /* prevent outline/rings from being clipped by effects */
    background:
      linear-gradient(hsl(var(--card)), hsl(var(--card))) padding-box,
      conic-gradient(from 220deg, #4285F4, #DB4437, #F4B400, #0F9D58, #4285F4) border-box;
    border: 2px solid transparent;
    color: hsl(var(--foreground));
    box-shadow: 0 1px 2px rgba(0,0,0,.08), 0 6px 16px rgba(0,0,0,.10);
  }
  .btn-google:hover {
    transform: translateY(-1px);
    background:
      linear-gradient(hsl(var(--card)), hsl(var(--muted))) padding-box,
      conic-gradient(from 220deg, #4285F4, #DB4437, #F4B400, #0F9D58, #4285F4) border-box;
    box-shadow: 0 4px 24px rgba(0,0,0,.16);
  }
  .btn-google:active { transform: translateY(0); box-shadow: 0 2px 12px rgba(0,0,0,.14); }
  .btn-google:focus-visible,
  .btn-google:focus {
    outline: 2px solid hsl(var(--secondary));
    outline-offset: 2px;
    @apply ring-2 ring-secondary ring-offset-2 ring-offset-background;
  }

  /* Icon button */
  .icon-btn { @apply inline-flex h-10 w-10 items-center justify-center rounded-full btn-outline; }
  .icon-btn, .icon-btn * { color: hsl(var(--foreground)); }
  .icon-btn svg { width: 18px; height: 18px; display: block; }

  /* Inputs */
  .input {
    @apply w-full rounded-xl border border-input bg-transparent px-4 py-2
           placeholder:text-[hsl(var(--muted-foreground))]
           focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 transition;
    box-shadow: 0 0 0 1px rgba(255,255,255,0.04) inset, 0 10px 25px rgba(0,0,0,0.25);
  }
  .textarea { @apply input min-h-[120px]; }
  .select   { @apply input pr-9; }

  /* Pills / Badges */
  .chip  { @apply inline-flex items-center gap-1 rounded-full px-2.5 py-1 text-xs bg-[hsl(var(--muted)/.5)] text-[hsl(var(--muted-foreground))] ring-1 ring-border; }
  .badge { @apply inline-flex items-center rounded-full px-2 py-0.5 text-xs bg-[hsl(var(--secondary)/.18)] text-[hsl(var(--secondary))] ring-1 ring-[hsl(var(--secondary)/.35)]; }

  /* Cards / Panels — glassy */
  .card {
    @apply rounded-3xl text-card-foreground ring-1 ring-border overflow-hidden gradient-border transition-transform duration-300 ease-lux shadow-soft;
    background-color: hsl(var(--card)/.60);
    backdrop-filter: blur(12px) saturate(125%);
    -webkit-backdrop-filter: blur(12px) saturate(125%);
  }
  .card:hover { transform: translateY(-2px); }

  .panel {
    @apply rounded-3xl ring-1 ring-border;
    background: linear-gradient(to bottom right, hsl(var(--card)/.65), hsl(var(--card)/.50));
    backdrop-filter: blur(10px) saturate(120%);
    -webkit-backdrop-filter: blur(10px) saturate(120%);
  }

  /* Modal (raised above sticky navbar) */
  .modal-backdrop { @apply fixed inset-0 bg-[hsl(var(--background))]/70 backdrop-blur-sm animate-fade-in; z-index: var(--z-overlay); }
  .modal {
    @apply fixed left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 card p-6 shadow-glow max-w-lg w-[92vw] animate-rise-in;
    z-index: var(--z-modal);
  }

  /* Nav — glassy */
  .nav {
    @apply sticky top-0 border-b border-border;
    background-color: hsl(var(--background)/.60);
    backdrop-filter: blur(16px) saturate(120%);
    -webkit-backdrop-filter: blur(16px) saturate(120%);
    z-index: var(--z-nav);
  }
  .nav-item { @apply text-sm text-[hsl(var(--muted-foreground))] hover:text-foreground transition-colors; }

  /* Tabs */
  .tabs { @apply inline-flex gap-1 p-1 rounded-full bg-[hsl(var(--muted)/.6)] gradient-border; }
  .tab { @apply px-4 py-2 rounded-full text-sm text-[hsl(var(--muted-foreground))] hover:text-foreground transition; }
  .tab.active { @apply bg-[hsl(var(--background))] text-foreground shadow-glow; }

  /* Footer (single, shared sitewide) */
  .site-footer { @apply border-t border-border; background-color: hsl(var(--background)/.6); backdrop-filter: blur(16px); -webkit-backdrop-filter: blur(16px); color: hsl(var(--muted-foreground)); }
  .site-footer a { color: hsl(var(--secondary)); }
  .site-footer a:hover { color: hsl(var(--primary)); }

  /* Container helper */
  .app-container { @apply mx-auto w-full px-4 sm:px-6 lg:px-8; max-width: 1200px; }

  /* Docs/Markdown (.prose) */
  .prose { @apply text-foreground leading-7; max-width: 72ch; }
  .prose h1 { @apply font-bold mb-4; font-size: var(--step-4); }
  .prose h2 { @apply font-semibold mt-8 mb-3; font-size: var(--step-3); }
  .prose h3 { @apply font-semibold mt-6 mb-2; font-size: var(--step-2); }
  .prose p  { @apply my-4 text-[hsl(var(--foreground))]; }
  .prose a  { @apply underline; color: hsl(var(--secondary)); }
  .prose a:hover { color: hsl(var(--primary)); }
  .prose ul, .prose ol { @apply my-4 pl-6; }
  .prose li { @apply my-1; }
  .prose code { @apply rounded-md px-1.5 py-0.5 text-sm; background: hsl(var(--muted)); color: hsl(var(--muted-foreground)); }
  .prose pre { @apply p-4 rounded-xl overflow-auto; background: hsl(var(--card)); color: hsl(var(--card-foreground)); border: 1px solid hsl(var(--border)); }
  .prose img, .prose video { @apply rounded-xl my-4 ring-1 ring-border; max-width: 100%; height: auto; }
}

/* ===== Extra animations & loaders (used globally) ===== */
@layer utilities {
  @keyframes spin-slow { from { transform: rotate(0) } to { transform: rotate(360deg) } }
  .animate-spin-slow { animation: spin-slow 2.2s linear infinite; }

  @keyframes pulse-float { 0%,100% { transform: translateY(0); opacity: .9 } 50% { transform: translateY(-6px); opacity: 1 } }
  .animate-pulse-float { animation: pulse-float 2.4s ease-in-out infinite; }
  .animate-pulse-float-slow { animation: pulse-float 3s ease-in-out infinite; }
  .animate-pulse-float-fast { animation: pulse-float 1.8s ease-in-out infinite; }

  @keyframes loading-bar { 0% { transform: translateX(-100%) } 100% { transform: translateX(100%) } }
  .animate-loading-bar { position: relative; overflow: hidden; }
  .animate-loading-bar::before {
    content: ""; position: absolute; inset: 0; transform: translateX(-100%);
    background: linear-gradient(90deg, transparent, hsl(var(--foreground)/.06), transparent);
    animation: loading-bar 1.2s linear infinite;
  }

  @keyframes toast-progress { from { width: 100% } to { width: 0% } }
  .animate-toast-progress { animation: toast-progress 3.2s linear forwards; }

  @keyframes shimmer { 0% { background-position: -200% 0 } 100% { background-position: 200% 0 } }

  @keyframes fade-in { from { opacity: 0 } to { opacity: 1 } }
  .animate-fade-in { animation: fade-in .2s ease-out both; }

  @keyframes rise-in { from { transform: translateY(6px); opacity: 0 } to { transform: translateY(0); opacity: 1 } }
  .animate-rise-in { animation: rise-in .25s cubic-bezier(.22,1,.36,1) both; }
}

/* ======= Reduced motion: tone down perpetual animations ======= */
@media (prefers-reduced-motion: reduce) {
  .animate-subtle-float,
  .animate-pulse-float,
  .animate-pulse-float-slow,
  .animate-pulse-float-fast,
  .animate-loading-bar,
  .animate-spin-slow,
  .animate-shimmer,
  .skeleton,
  .animate-fade-in,
  .animate-rise-in {
    animation-duration: 1ms !important;
    animation-iteration-count: 1 !important;
  }
}

/* ======= Plain CSS fallback (guaranteed visible aurora) ======= */
body.page-aurora {
  background-color: hsl(var(--background));
  background-image:
    radial-gradient(1000px 700px at 15% -10%, hsl(var(--g1) / .20), transparent 60%),
    radial-gradient(900px 600px at 110% -10%, hsl(var(--g2) / .16), transparent 55%),
    radial-gradient(1000px 900px at 85% 110%, hsl(var(--g3) / .14), transparent 60%);
  background-repeat: no-repeat;
  background-size: cover;
  background-attachment: fixed;
}

/* ======= Mobile/iOS tweak: avoid fixed-attachment jank ======= */
@media (pointer: coarse) { .page-aurora { background-attachment: scroll; } }
@supports (-webkit-touch-callout: none) { .page-aurora { background-attachment: scroll; } }
